# 限流

### 令牌桶算法
令牌桶算法主要用于限制流量的平均流入速率，并且还允许出现一定程度上的突发流量。

令牌桶算法限流的基本流程:

* 每秒会有r个令牌被放入桶内，也就是说，会以1/r秒的平均速率向桶中依次放入令牌
(比如每秒共放入10个令牌，那么每0.1秒放入1个令牌)
* 桶的容量是固定不变的，假设桶中最多只允许存放b个令牌，如果桶满了再放入令牌，则溢出(新添加的令牌被丢弃)
* 当一个n字节的请求包到达时，将消耗n个令牌，然后再发送该数据包
* 若桶中的可用令牌数小于n，则该数据包将会被执行限流处理。